{"ast":null,"code":"import React,{useEffect,useState}from\"react\";// Importações de Firebase e Roteamento\nimport{Link}from'react-router-dom';// <--- Importado para navegação\nimport{auth,db}from\"../services/firebaseService\";import{onAuthStateChanged}from\"firebase/auth\";import{doc,getDoc}from\"firebase/firestore\";// <--- Importado para Firestore\n// Componentes\nimport Quiz from\"../components/Quiz\";// Manter, mas o componente será usado via rota /quiz\nimport GraficoMortalidade from\"../components/GraficoMortalidade\";import\"../styles/Home.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[user,setUser]=useState(null);const[quizCompleted,setQuizCompleted]=useState(false);// NOVO ESTADO\nconst[loadingQuizStatus,setLoadingQuizStatus]=useState(true);// NOVO ESTADO\nuseEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async u=>{setUser(u);// --- LÓGICA DE VERIFICAÇÃO DO QUIZ ---\nif(u){try{const docRef=doc(db,\"quiz_results\",u.uid);const docSnap=await getDoc(docRef);setQuizCompleted(docSnap.exists());// True se o documento existir\n}catch(error){console.error(\"Erro ao verificar status do quiz:\",error);setQuizCompleted(false);// Assume não completado em caso de erro\n}}else{setQuizCompleted(false);// Reseta se deslogar\n}setLoadingQuizStatus(false);// Finaliza o loading\n});return()=>unsubscribe();},[]);// Removemos handleStartQuiz e a renderização condicional do Quiz aqui,\n// pois a navegação agora será via <Link to=\"/quiz\">.\n// O Quiz.js deve ser acessado pela rota /quiz, e ele cuidará de mostrar\n// o resultado ou o formulário, conforme a lógica que adicionamos lá.\n// === Renderiza a Home (Hero Section e Gráfico) ===\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"home-container page-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-hero\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Bem-vindo ao Checkup Azul\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cuidar da sa\\xFAde \\xE9 um ato de coragem e autocuidado. \",/*#__PURE__*/_jsx(\"br\",{}),\"Aqui no \",/*#__PURE__*/_jsx(\"strong\",{children:\"Checkup Azul\"}),\", voc\\xEA encontra artigos sobre sa\\xFAde masculina que descomplicam o que realmente importa \\u2014 corpo, mente e bem-estar.\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Al\\xE9m disso, voc\\xEA pode participar do nosso \",/*#__PURE__*/_jsx(\"strong\",{children:\"Quiz interativo\"}),\", que vai te ajudar a descobrir como est\\xE1 a sua rotina de cuidados e indicar dicas personalizadas para melhorar seus h\\xE1bitos e alcan\\xE7ar uma vida mais equilibrada. \",/*#__PURE__*/_jsx(\"br\",{}),\"Comece hoje mesmo o seu Checkup Azul \\u2014 pequenas mudan\\xE7as fazem uma grande diferen\\xE7a!\"]}),loadingQuizStatus?/*#__PURE__*/_jsx(\"button\",{className:\"quiz-button-home\",disabled:true,children:\"Carregando status...\"}):user?/*#__PURE__*/_jsxs(Link,{to:\"/quiz\",children:[\" \",/*#__PURE__*/_jsx(\"button\",{className:\"quiz-button-home\",children:quizCompleted?'Visualizar Resultado':'Iniciar Quiz'})]}):/*#__PURE__*/_jsx(\"p\",{className:\"login-text\",children:\"Fa\\xE7a **login ou cadastre-se** para acessar o Quiz de Sa\\xFAde Masculina.\"})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"grafico-section\",children:/*#__PURE__*/_jsx(GraficoMortalidade,{})})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","auth","db","onAuthStateChanged","doc","getDoc","Quiz","GraficoMortalidade","jsx","_jsx","jsxs","_jsxs","Home","user","setUser","quizCompleted","setQuizCompleted","loadingQuizStatus","setLoadingQuizStatus","unsubscribe","u","docRef","uid","docSnap","exists","error","console","className","children","disabled","to"],"sources":["C:/Users/maxka/saude-homem-web/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n// Importações de Firebase e Roteamento\r\nimport { Link } from 'react-router-dom'; // <--- Importado para navegação\r\nimport { auth, db } from \"../services/firebaseService\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\"; // <--- Importado para Firestore\r\n// Componentes\r\nimport Quiz from \"../components/Quiz\"; // Manter, mas o componente será usado via rota /quiz\r\nimport GraficoMortalidade from \"../components/GraficoMortalidade\";\r\nimport \"../styles/Home.css\";\r\n\r\nexport default function Home() {\r\n    const [user, setUser] = useState(null);\r\n    const [quizCompleted, setQuizCompleted] = useState(false); // NOVO ESTADO\r\n    const [loadingQuizStatus, setLoadingQuizStatus] = useState(true); // NOVO ESTADO\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (u) => {\r\n            setUser(u);\r\n            \r\n            // --- LÓGICA DE VERIFICAÇÃO DO QUIZ ---\r\n            if (u) {\r\n                try {\r\n                    const docRef = doc(db, \"quiz_results\", u.uid);\r\n                    const docSnap = await getDoc(docRef);\r\n                    setQuizCompleted(docSnap.exists()); // True se o documento existir\r\n                } catch (error) {\r\n                    console.error(\"Erro ao verificar status do quiz:\", error);\r\n                    setQuizCompleted(false); // Assume não completado em caso de erro\r\n                }\r\n            } else {\r\n                setQuizCompleted(false); // Reseta se deslogar\r\n            }\r\n            setLoadingQuizStatus(false); // Finaliza o loading\r\n        });\r\n        \r\n        return () => unsubscribe();\r\n    }, []); \r\n\r\n    // Removemos handleStartQuiz e a renderização condicional do Quiz aqui,\r\n    // pois a navegação agora será via <Link to=\"/quiz\">.\r\n    \r\n    // O Quiz.js deve ser acessado pela rota /quiz, e ele cuidará de mostrar\r\n    // o resultado ou o formulário, conforme a lógica que adicionamos lá.\r\n\r\n    // === Renderiza a Home (Hero Section e Gráfico) ===\r\n    return (\r\n        <div className=\"home-container page-wrapper\">\r\n            <div className=\"home-hero\">\r\n                <div className=\"overlay\"></div>\r\n                <div className=\"home-content\">\r\n                    <h1>Bem-vindo ao Checkup Azul</h1>\r\n                    <p>\r\n                        Cuidar da saúde é um ato de coragem e autocuidado. <br />\r\n                        Aqui no <strong>Checkup Azul</strong>, você encontra artigos sobre\r\n                        saúde masculina que descomplicam o que realmente importa — corpo,\r\n                        mente e bem-estar.\r\n                    </p>\r\n                    <p>\r\n                        Além disso, você pode participar do nosso <strong>Quiz interativo</strong>,\r\n                        que vai te ajudar a descobrir como está a sua rotina de cuidados e\r\n                        indicar dicas personalizadas para melhorar seus hábitos e alcançar\r\n                        uma vida mais equilibrada. <br />\r\n                        Comece hoje mesmo o seu Checkup Azul — pequenas mudanças fazem uma\r\n                        grande diferença!\r\n                    </p>\r\n\r\n                    {loadingQuizStatus ? (\r\n                         <button className=\"quiz-button-home\" disabled>\r\n                            Carregando status...\r\n                        </button>\r\n                    ) : user ? (\r\n                        <Link to=\"/quiz\"> {/* Usa Link para navegar */}\r\n                            <button className=\"quiz-button-home\">\r\n                                {/* NOVO: Texto condicional */}\r\n                                {quizCompleted ? 'Visualizar Resultado' : 'Iniciar Quiz'}\r\n                            </button>\r\n                        </Link>\r\n                    ) : (\r\n                        <p className=\"login-text\">\r\n                            Faça **login ou cadastre-se** para acessar o Quiz de Saúde Masculina.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        \r\n            <section className=\"grafico-section\">\r\n                <GraficoMortalidade />\r\n            </section>\r\n            \r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}