{"ast":null,"code":"// src/components/Humor.js\nimport{useState,useEffect,useContext}from\"react\";import{db}from\"../services/firebaseService\";import{collection,addDoc,query,where,getDocs,orderBy}from\"firebase/firestore\";import{UserContext}from\"../context/UserContext\";import{Line}from\"react-chartjs-2\";import{Chart as ChartJS,Title,Tooltip,Legend,LineElement,CategoryScale,LinearScale,PointElement}from'chart.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(Title,Tooltip,Legend,LineElement,CategoryScale,LinearScale,PointElement);export default function Humor(){const{user}=useContext(UserContext);const[estado,setEstado]=useState(\"\");const[historico,setHistorico]=useState([]);useEffect(()=>{const fetchHumor=async()=>{if(!user)return;const q=query(collection(db,\"humor\"),where(\"userId\",\"==\",user.uid),orderBy(\"data\",\"asc\"));const querySnapshot=await getDocs(q);setHistorico(querySnapshot.docs.map(doc=>doc.data()));};fetchHumor();},[user]);const registrarHumor=async()=>{if(!estado)return;await addDoc(collection(db,\"humor\"),{userId:user.uid,estado,data:new Date()});setEstado(\"\");setHistorico(prev=>[...prev,{estado,data:new Date()}]);};const data={labels:historico.map(h=>h.data.toDate?h.data.toDate().toLocaleDateString():h.data.toLocaleDateString()),datasets:[{label:\"Humor Di√°rio\",data:historico.map(h=>[\"üòû\",\"üòê\",\"üôÇ\",\"üòÑ\"].indexOf(h.estado)+1),borderColor:\"blue\",fill:false}]};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registro de Humor\"}),/*#__PURE__*/_jsxs(\"select\",{value:estado,onChange:e=>setEstado(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uD83D\\uDE1E\",children:\"\\uD83D\\uDE1E\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uD83D\\uDE10\",children:\"\\uD83D\\uDE10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uD83D\\uDE42\",children:\"\\uD83D\\uDE42\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\uD83D\\uDE04\",children:\"\\uD83D\\uDE04\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:registrarHumor,children:\"Registrar\"}),historico.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:600,marginTop:20},children:/*#__PURE__*/_jsx(Line,{data:data})})]});}","map":{"version":3,"names":["useState","useEffect","useContext","db","collection","addDoc","query","where","getDocs","orderBy","UserContext","Line","Chart","ChartJS","Title","Tooltip","Legend","LineElement","CategoryScale","LinearScale","PointElement","jsx","_jsx","jsxs","_jsxs","register","Humor","user","estado","setEstado","historico","setHistorico","fetchHumor","q","uid","querySnapshot","docs","map","doc","data","registrarHumor","userId","Date","prev","labels","h","toDate","toLocaleDateString","datasets","label","indexOf","borderColor","fill","children","value","onChange","e","target","onClick","length","style","maxWidth","marginTop"],"sources":["C:/Users/maxka/saude-homem-web/src/components/Humor.js"],"sourcesContent":["// src/components/Humor.js\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { db } from \"../services/firebaseService\";\r\nimport { collection, addDoc, query, where, getDocs, orderBy } from \"firebase/firestore\";\r\nimport { UserContext } from \"../context/UserContext\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement } from 'chart.js';\r\n\r\nChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale, PointElement);\r\n\r\nexport default function Humor() {\r\n  const { user } = useContext(UserContext);\r\n  const [estado, setEstado] = useState(\"\");\r\n  const [historico, setHistorico] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchHumor = async () => {\r\n      if (!user) return;\r\n      const q = query(collection(db, \"humor\"), where(\"userId\", \"==\", user.uid), orderBy(\"data\", \"asc\"));\r\n      const querySnapshot = await getDocs(q);\r\n      setHistorico(querySnapshot.docs.map(doc => doc.data()));\r\n    };\r\n    fetchHumor();\r\n  }, [user]);\r\n\r\n  const registrarHumor = async () => {\r\n    if (!estado) return;\r\n    await addDoc(collection(db, \"humor\"), {\r\n      userId: user.uid,\r\n      estado,\r\n      data: new Date()\r\n    });\r\n    setEstado(\"\");\r\n    setHistorico(prev => [...prev, { estado, data: new Date() }]);\r\n  };\r\n\r\n  const data = {\r\n    labels: historico.map(h => h.data.toDate ? h.data.toDate().toLocaleDateString() : h.data.toLocaleDateString()),\r\n    datasets: [\r\n      {\r\n        label: \"Humor Di√°rio\",\r\n        data: historico.map(h => [\"üòû\",\"üòê\",\"üôÇ\",\"üòÑ\"].indexOf(h.estado)+1),\r\n        borderColor: \"blue\",\r\n        fill: false\r\n      }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Registro de Humor</h2>\r\n      <select value={estado} onChange={e => setEstado(e.target.value)}>\r\n        <option value=\"\">Selecione</option>\r\n        <option value=\"üòû\">üòû</option>\r\n        <option value=\"üòê\">üòê</option>\r\n        <option value=\"üôÇ\">üôÇ</option>\r\n        <option value=\"üòÑ\">üòÑ</option>\r\n      </select>\r\n      <button onClick={registrarHumor}>Registrar</button>\r\n\r\n      {historico.length > 0 && (\r\n        <div style={{ maxWidth: 600, marginTop: 20 }}>\r\n          <Line data={data} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}